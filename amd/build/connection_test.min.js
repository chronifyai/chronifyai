define("local_chronifyai/connection_test",["exports","core/notification","./repository"],(function(_exports,_notification,_repository){var obj;
/**
   * Connection test module for ChronifyAI configuration wizard.
   *
   * @module     local_chronifyai/connection_test
   * @copyright  2025 SEBALE Innovations (http://sebale.net)
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj};_exports.init=function(){let buttonSelector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#test-connection-btn";const testButton=document.querySelector(buttonSelector);testButton&&testButton.addEventListener("click",(async event=>{event.preventDefault(),await handleTestConnection(testButton)}))};const handleTestConnection=async button=>{var _document$querySelect,_document$querySelect2,_document$querySelect3;const apiBaseUrl=(null===(_document$querySelect=document.querySelector('input[name="api_base_url"]'))||void 0===_document$querySelect?void 0:_document$querySelect.value)||"",clientId=(null===(_document$querySelect2=document.querySelector('input[name="client_id"]'))||void 0===_document$querySelect2?void 0:_document$querySelect2.value)||"",clientSecret=(null===(_document$querySelect3=document.querySelector('input[name="client_secret"]'))||void 0===_document$querySelect3?void 0:_document$querySelect3.value)||"",resultContainer=document.querySelector("#connection-result");if(!resultContainer)return;if(!apiBaseUrl||!clientId||!clientSecret)return void showResult(resultContainer,!1,"All fields are required for connection testing.");button.disabled=!0;const originalText=button.textContent;button.textContent="Testing...",resultContainer.classList.remove("success","error"),resultContainer.classList.add("loading"),resultContainer.innerHTML='<span class="icon">⏳</span> Testing connection...';try{const result=await(0,_repository.verifyConnection)(apiBaseUrl,clientId,clientSecret);showResult(resultContainer,result.success,result.message)}catch(error){showResult(resultContainer,!1,"An unexpected error occurred: "+error.message),await _notification.default.exception(error)}finally{button.disabled=!1,button.textContent=originalText}},showResult=(container,success,message)=>{container.classList.remove("success","error","loading"),container.classList.add(success?"success":"error");const icon=success?"✓":"✗";container.innerHTML='<span class="icon">'.concat(icon,"</span> ").concat(escapeHtml(message))},escapeHtml=text=>{const div=document.createElement("div");return div.textContent=text,div.innerHTML}}));

//# sourceMappingURL=connection_test.min.js.map